image:
  - Visual Studio 2017
 
platform:
  - x86
  - x64 
 
configuration:
  - Debug
  - Release

init:
- cmd: >-
    if "%PLATFORM%"=="x86" call "C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvars32.bat"

    if "%PLATFORM%"=="x64" call "C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvars64.bat"

build:
    parallel: true

environment:
    BOOST_ROOT: C:/Libraries/boost_1_66_0

before_build:
- cmd: >-
    cd %APPVEYOR_BUILD_FOLDER%
    
    mkdir build         
    
    cd build       
    
    cmake .. -G "Visual Studio 15" -DBoost_DEBUG=ON    

build_script:
- cmd: >-
    cmake --build .
    
test_script:
- cmd: >-
    ctest
